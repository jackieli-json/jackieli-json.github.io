!function(t,n,o,i){t.support&&(t.support.cors=!0),i.heredoc=function(t){return t.toString().split("\n").slice(1,-1).join("\n")+"\n"},i.toHtml=function(t,o,i){return t=n.compile(t),t.render(o,i)},i.render=function(t){t=d(t),new l(t).render(t.extraTplData)};var e=function(t){return typeof t},s=function(t){window.console&&window.console.log&&window.console.log(t)},r=function(t){return"string"===e(t)&&(0===t.indexOf("http://")||0===t.indexOf("https://"))},a=window.localStorage||{},p={target:"body",tpl:"#xhoganTpl",data:{},tplVersion:"1",dataVersion:"1",appendToTarget:!0,dataType:"json",cbk:function(t,n,o,i){}},d=function(n){return n=t.extend({},p,n||{}),n.$target=t(n.target),n},l=function(t){this.opts=t,this.id=o.encode(t.target),this.init()};l.prototype={init:function(){this.isTplRemote=r(this.opts.tpl),this.isDataRemote=r(this.opts.data),this.tplId=this.isTplRemote?o.encode(this.opts.tpl):"localTpl",this.dataId=this.isDataRemote?o.encode(this.opts.data):"localData",this.tplKey=[this.id,this.tplId].join("-"),this.dataKey=[this.id,this.dataId].join("-"),this.tplVersionKey=this.tplKey+"-Version",this.dataVersionKey=this.dataKey+"-Version"},render:function(t){var n=this;this.getHtml(function(t,o,i,e){return t?(s("xhogan:在getHtml方法中发生错误->"+t),void(n.opts.cbk&&n.opts.cbk(t))):(n.opts.appendToTarget?n.opts.$target.append(o):n.opts.$target.html(o),void(n.opts.cbk&&n.opts.cbk(t,o,i,e)))},t)},getHtml:function(t,n){var o=this;this.getTpl(this.opts.tpl,function(e,s){return e?void t(e):void o.getData(o.opts.data,function(o,e){return o?void t(o):void t(null,i.toHtml(s,e,n),s,e)})})},getTpl:function(n,o){if(0===n.indexOf("#"))return void o(null,t(n)[0].innerHTML);var i=this,e=a[this.tplVersionKey];return e&&e===this.opts.tplVersion?void o(null,a[this.tplKey]):void t.ajax({url:n,cache:!1,success:function(t,n,e){a[i.tplVersionKey]=i.opts.tplVersion,a[i.tplKey]=t,o(null,t)},error:function(t,n,i){o(i)}})},getData:function(n,o){if("object"===e(n))return void o(null,n);var i=this,s=a[this.dataVersionKey];return s&&s===this.opts.dataVersion?void o(null,JSON.parse(a[this.dataKey])):void t.ajax({crossDomain:!0,url:n,cache:!1,success:function(t,n,e){a[i.dataVersionKey]=i.opts.dataVersion,a[i.dataKey]=JSON.stringify(t),o(null,t)},error:function(t,n,i){o(i)}})}}}(window.jQuery||window.Zepto,Hogan,Base64,window.xhogan={});