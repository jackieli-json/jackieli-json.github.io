<!DOCTYPE html><html class="theme-lattice"><head><meta charset="utf-8"><title>css3 animation 属性众妙 | 西门互联「西门互联」</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="西门互联"><meta name="designer" content="西门互联"><meta name="rating" content="general"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="index, follow"><meta name="keywords" content="动画,西门互联,前端,个人博客"><link rel="canonical" href="https://demo.lilidong.cn/notes/2016/11/28/css3-animation-properties/index.html"><link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="144x144" href="/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="60x60" href="/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="120x120" href="/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="152x152" href="/img/apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="/img/favicon-230x230.png" sizes="230x230"><link rel="icon" type="image/png" href="/img/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32"><meta name="msapplication-TileColor" content="#2f83cd"><meta name="msapplication-TileImage" content="/img/mstile-144x144.png"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" href="/atom.xml" title="西门互联"><meta name="description" content="本文不会详细介绍每个 css3 animation 属性（需要了解的同学可先移步 MDN），而是结合实际的开发经验，介绍 css3 animation 属性的一些使用场景及技巧。
1. animation-delayMDN 中的介绍：

animation-delay CSS 属性定义动画于何时开始，即从动画应用在元素上到动画开始的这段时间的长度。

该属性值默认为 0s，可为正值，也可为负值。"><meta property="og:type" content="article"><meta property="og:title" content="css3 animation 属性众妙"><meta property="og:url" content="https://demo.lilidong.cn/notes/2016/11/28/css3-animation-properties/index.html"><meta property="og:site_name" content="西门互联"><meta property="og:description" content="本文不会详细介绍每个 css3 animation 属性（需要了解的同学可先移步 MDN），而是结合实际的开发经验，介绍 css3 animation 属性的一些使用场景及技巧。
1. animation-delayMDN 中的介绍：

animation-delay CSS 属性定义动画于何时开始，即从动画应用在元素上到动画开始的这段时间的长度。

该属性值默认为 0s，可为正值，也可为负值。"><meta property="og:image" content="https://demo.lilidong.cn//misc.aotu.io/Yettyzyt/2016-11-28-css3-animation-properties/animation-delay-timeline.png"><meta property="og:image" content="https://demo.lilidong.cn//misc.aotu.io/Yettyzyt/2016-11-28-css3-animation-properties/animation-delay-campus.gif"><meta property="og:updated_time" content="2016-12-22T09:53:25.576Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="css3 animation 属性众妙"><meta name="twitter:description" content="本文不会详细介绍每个 css3 animation 属性（需要了解的同学可先移步 MDN），而是结合实际的开发经验，介绍 css3 animation 属性的一些使用场景及技巧。
1. animation-delayMDN 中的介绍：

animation-delay CSS 属性定义动画于何时开始，即从动画应用在元素上到动画开始的这段时间的长度。

该属性值默认为 0s，可为正值，也可为负值。"><meta name="twitter:image" content="https://demo.lilidong.cn//misc.aotu.io/Yettyzyt/2016-11-28-css3-animation-properties/animation-delay-timeline.png"><meta name="twitter:site" content="o2circle"><script>var App={root:"/",isHome:!1,isCate:!1,isTag:!1}</script></head><body class="page-post-detail"><div class="mod-hd"><div class="grid"><div class="mod-logo"><a href="/index.html" title="西门互联">西门互联</a></div><span class="mod-hd-toggle" id="J_hdToggle"><i class="fa fa-bars"></i></span><div class="mod-hd-main"><div class="mod-hd-inner"><nav class="mod-nav"><ul class="mod-nav-list"><li class="main-nav-item"><a href="/index.html" class="main-nav-link">首页</a></li><li class="main-nav-item"><a href="/about/" class="main-nav-link">关于</a></li><li class="main-nav-item"><a href="/join/" class="main-nav-link">加入</a></li></ul></nav><div class="mod-search"><a class="fa fa-search mod-search-ico" id="J_searchTrigger" title="搜索"></a><form id="J_searchForm" method="get" class="mod-search-form" action="/search/"><input type="text" name="query" class="mod-search-ipt" id="J_searchInput" placeholder="搜索"></form></div></div></div></div></div><div class="mod-container"><div class="grid"><div class="mod-main"><article class="post"><header class="post-hd"><h2 class="post-tit">css3 animation 属性众妙</h2><div class="post-meta">by <a target="_blank" href="https://github.com/Yettyzyt" class="post-author">燕婷</a> on <span>2016-11-28</span></div><p class="post-subtit" style="display:none"><i class="fa fa-quote-left"></i>css3 animation 属性使用场景及技巧</p><span style="display:none" id="busuanzi_value_page_pv"></span></header><div class="post-cover"><img src="//misc.aotu.io/Yettyzyt/2016-11-28-css3-animation-properties/css3-animation-properties_900x500.png" alt="css3 animation 属性众妙"></div><div class="post-content"><p>本文不会详细介绍每个 css3 animation 属性（需要了解的同学可先移步 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation" target="_blank" rel="external">MDN</a>），而是结合实际的开发经验，介绍 css3 animation 属性的一些使用场景及技巧。</p><h3 id="1-animation-delay" class="post-heading"><a href="#1-animation-delay" class="headerlink" title="1. animation-delay"></a>1. animation-delay<a class="post-anchor" href="#1-animation-delay" aria-hidden="true"></a></h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-delay" target="_blank" rel="external">MDN</a> 中的介绍：</p><blockquote><p>animation-delay CSS 属性定义动画于何时开始，即从动画应用在元素上到动画开始的这段时间的长度。</p></blockquote><p>该属性值默认为 0s，可为正值，也可为负值。</p><h4 id="动画时间轴" class="post-heading"><a href="#动画时间轴" class="headerlink" title="动画时间轴"></a>动画时间轴<a class="post-anchor" href="#动画时间轴" aria-hidden="true"></a></h4><p>由于 css3 动画没有时间轴，<code>animation-delay</code> 最常见的是用于将动画与其他动画的执行时机错开，将动画落到不同的时间点，形成动画时间轴。<br></p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.ani--first</span> &#123;</div><div class="line">    <span class="attribute">animation-name</span>: aniFirst;</div><div class="line">    <span class="attribute">animation-duration</span>: <span class="number">2s</span>;</div><div class="line">    <span class="attribute">animation-delay</span>: <span class="number">0s</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.ani--second</span> &#123;</div><div class="line">    <span class="attribute">animation-name</span>: aniSecond;</div><div class="line">    <span class="attribute">animation-duration</span>: <span class="number">1s</span>;</div><div class="line">    <span class="attribute">animation-delay</span>: <span class="number">2s</span>; <span class="comment">/* aniSecond 延迟 2s 执行*/</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>形成的时间轴如下图所示：<br><img src="//misc.aotu.io/Yettyzyt/2016-11-28-css3-animation-properties/animation-delay-timeline.png" alt="动画时间轴"></p><h4 id="轮播" class="post-heading"><a href="#轮播" class="headerlink" title="轮播"></a>轮播<a class="post-anchor" href="#轮播" aria-hidden="true"></a></h4><p>css3 animation 亦可实现一些 js 的效果，例如利用 <code>animation-delay</code> 可以实现一个简单的轮播。以下是一个三屏轮播的例子。<br></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.slider__item</span> &#123;</div><div class="line">    <span class="attribute">animation</span>: ani <span class="number">6s</span> infinite linear both;</div><div class="line">    @<span class="keyword">for</span> <span class="variable">$i</span> from 1 to 4 &#123;</div><div class="line">      &amp;:nth-child(#&#123;<span class="variable">$i</span>&#125;) &#123;</div><div class="line">        <span class="attribute">animation-delay</span>: (-<span class="number">1</span>+<span class="variable">$i</span>)*<span class="number">2s</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@keyframes ani &#123;</div><div class="line">  0%, 33<span class="selector-class">.33</span>% &#123;<span class="attribute">opacity</span>: <span class="number">1</span>; <span class="attribute">visibility</span>: visible;&#125;</div><div class="line">  33<span class="selector-class">.34</span>%, 100% &#123;<span class="attribute">opacity</span>: <span class="number">0</span>; <span class="attribute">visibility</span>: hidden;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p></p><p data-height="368" data-theme-id="0" data-slug-hash="KNvRxZ" data-default-tab="css,result" data-user="Yetty" data-embed-version="2" data-pen-title="KNvRxZ" class="codepen">See the Pen <a href="http://codepen.io/Yetty/pen/KNvRxZ/" target="_blank" rel="external">KNvRxZ</a> by Yetty (<a href="http://codepen.io/Yetty" target="_blank" rel="external">@Yetty</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p><script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><h4 id="序列动画" class="post-heading"><a href="#序列动画" class="headerlink" title="序列动画"></a>序列动画<a class="post-anchor" href="#序列动画" aria-hidden="true"></a></h4><p>多个元素使用相同的动画效果时，将动画执行时机依次错开，可形成整齐有序的序列动画效果。<br></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">for</span> <span class="variable">$i</span> from 1 to 6 &#123;</div><div class="line">  <span class="selector-class">.list__item</span>:nth-child(#&#123;<span class="variable">$i</span>&#125;) &#123;</div><div class="line">    <span class="attribute">animation-delay</span>: (-<span class="number">1</span>+<span class="variable">$i</span>)*<span class="number">0.1s</span>; <span class="comment">/*计算每个元素的 animation-delay */</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p></p><p data-height="265" data-theme-id="0" data-slug-hash="BQWZWz" data-default-tab="css,result" data-user="Yetty" data-embed-version="2" data-pen-title="listAni" class="codepen">See the Pen <a href="http://codepen.io/Yetty/pen/BQWZWz/" target="_blank" rel="external">listAni</a> by Yetty (<a href="http://codepen.io/Yetty" target="_blank" rel="external">@Yetty</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p><script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><p>以笔者开发的<a href="http://jdc.jd.com/h5/jd-campus-2017/international/index.html" target="_blank" rel="external">京东2017海外招聘</a>项目为例，第二屏的菜单和第三屏的时间轴的进退场动画都运用了序列动画。下图展示第三屏时间轴的进场效果，有兴趣的同学亦可扫码观看完整案例。</p><p><img src="//misc.aotu.io/Yettyzyt/2016-11-28-css3-animation-properties/animation-delay-campus.gif" alt="京东2017海外招聘"></p><h4 id="无限循环的序列动画" class="post-heading"><a href="#无限循环的序列动画" class="headerlink" title="无限循环的序列动画"></a>无限循环的序列动画<a class="post-anchor" href="#无限循环的序列动画" aria-hidden="true"></a></h4><p><code>animation-delay</code> 可为负值。<strong>负值会让动画从它的动画序列中某位置立即开始。</strong> 巧用这个负值，可以解决实际开发中的一些问题。</p><p>如若上述的序列动画要进行无限循环，单纯将 <code>animation-iteration-count</code> 设置为 <code>infinite</code>，动画开始时会有延迟。此时，将 <code>animation-delay</code> 设置为负值，提前动画开始执行的时机，当用户看到动画时，动画便已经处于进行中的状态。<br></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">for</span> <span class="variable">$i</span> from 1 to 6 &#123;</div><div class="line">  <span class="selector-class">.list__item</span>:nth-child(#&#123;<span class="variable">$i</span>&#125;) &#123;</div><div class="line">    <span class="attribute">animation-delay</span>: -<span class="variable">$i</span>*<span class="number">0.1s</span>; <span class="comment">/* animation-delay 为负值*/</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p></p><p data-height="265" data-theme-id="0" data-slug-hash="VmpMEE" data-default-tab="css,result" data-user="Yetty" data-embed-version="2" data-pen-title="listAniInfinite" class="codepen">See the Pen <a href="http://codepen.io/Yetty/pen/VmpMEE/" target="_blank" rel="external">listAniInfinite</a> by Yetty (<a href="http://codepen.io/Yetty" target="_blank" rel="external">@Yetty</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p><script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><h4 id="调试动画" class="post-heading"><a href="#调试动画" class="headerlink" title="调试动画"></a>调试动画<a class="post-anchor" href="#调试动画" aria-hidden="true"></a></h4><p>将 <code>animation-play-state</code> 设置为 <code>paused</code>，<code>animation-delay</code> 设置成不同的负值，可以查看动画在不同帧时的状态，便于进行动画调试。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.list__item</span> &#123;</div><div class="line">    <span class="attribute">animation</span>: listAni <span class="number">0.5s</span> linear both alternate infinite;</div><div class="line">    <span class="attribute">animation-play-state</span>: paused;</div><div class="line">&#125;</div><div class="line">@for <span class="variable">$i</span> from <span class="number">1</span> to <span class="number">6</span> &#123;</div><div class="line">    <span class="selector-class">.list--first</span> <span class="selector-class">.list__item</span>:nth-child(#&#123;<span class="variable">$i</span>&#125;) &#123;</div><div class="line">        <span class="attribute">animation-delay</span>: -<span class="variable">$i</span>*<span class="number">0.1s</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@for <span class="variable">$i</span> from <span class="number">1</span> to <span class="number">6</span> &#123;</div><div class="line">    <span class="selector-class">.list--second</span> <span class="selector-class">.list__item</span>:nth-child(#&#123;<span class="variable">$i</span>&#125;) &#123;</div><div class="line">        <span class="attribute">animation-delay</span>: (-<span class="number">2</span>-<span class="variable">$i</span>)*<span class="number">0.1s</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@for <span class="variable">$i</span> from <span class="number">1</span> to <span class="number">6</span> &#123;</div><div class="line">    <span class="selector-class">.list--third</span> <span class="selector-class">.list__item</span>:nth-child(#&#123;<span class="variable">$i</span>&#125;) &#123;</div><div class="line">        <span class="attribute">animation-delay</span>: (-<span class="number">4</span>-<span class="variable">$i</span>)*<span class="number">0.1s</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p data-height="265" data-theme-id="0" data-slug-hash="ObprrZ" data-default-tab="css,result" data-user="Yetty" data-embed-version="2" data-pen-title="listAniPaused" class="codepen">See the Pen <a href="http://codepen.io/Yetty/pen/ObprrZ/" target="_blank" rel="external">listAniPaused</a> by Yetty (<a href="http://codepen.io/Yetty" target="_blank" rel="external">@Yetty</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p><script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><h3 id="2-animation-fill-mode" class="post-heading"><a href="#2-animation-fill-mode" class="headerlink" title="2. animation-fill-mode"></a>2. animation-fill-mode<a class="post-anchor" href="#2-animation-fill-mode" aria-hidden="true"></a></h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-fill-mode" target="_blank" rel="external">MDN</a> 中的介绍：</p><blockquote><p>animation-fill-mode 这个 CSS 属性用来指定在动画执行之前和之后如何给动画的目标应用样式。</p></blockquote><p><code>animation-fill-mode</code> 应该算是 <code>animation</code> 属性里比较难上手的一个，但它的作用却很大。</p><h4 id="保持结束状态" class="post-heading"><a href="#保持结束状态" class="headerlink" title="保持结束状态"></a>保持结束状态<a class="post-anchor" href="#保持结束状态" aria-hidden="true"></a></h4><p>“动画结束后，突然跳回第一帧！” 很多刚接触 css3 动画的同学，都是在这个场景下，接触了 <code>animation-fill-mode</code> 属性。将 <code>animation-fill-mode</code> 设置为 <code>forwards</code>，动画执行结束后保持最后一帧的样式。<br></p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.ani-area__item--forwards</span> &#123;</div><div class="line">    <span class="attribute">animation</span>: ani <span class="number">1s</span> ease;</div><div class="line">    <span class="attribute">animation-fill-mode</span>: forwards;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p></p><p data-height="265" data-theme-id="0" data-slug-hash="MbmvQL" data-default-tab="css,result" data-user="Yetty" data-embed-version="2" data-pen-title="MbmvQL" class="codepen">See the Pen <a href="http://codepen.io/Yetty/pen/MbmvQL/" target="_blank" rel="external">MbmvQL</a> by Yetty (<a href="http://codepen.io/Yetty" target="_blank" rel="external">@Yetty</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p><script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><h4 id="开始前状态" class="post-heading"><a href="#开始前状态" class="headerlink" title="开始前状态"></a>开始前状态<a class="post-anchor" href="#开始前状态" aria-hidden="true"></a></h4><p>开发动画时，我们都是先根据视觉稿做好构建，再来给元素加动画的。如上文所述，可通过 <code>animation-delay</code> 来延迟的动画的执行。而在执行前，元素往往需要先隐藏（<code>translate</code> 定位到视窗外 / <code>opacity</code> 设置为 0 / <code>scale</code> 设置为 0 等）。若将隐藏元素的样式直接应用到元素上，一来不利于构建，二来对于不支持动画的浏览器来说，只会呈现一片空白。此时，<code>animation-fill-mode</code> 的 <code>backwards</code> 属性值便派上用场。</p><p>对于 <code>backwards</code> 的解释，笔者见过不少文章的说法都有不妥之处，认为 <code>backwards</code> 与 <code>forwards</code> 相反，表示动画执行结束后保持第一帧的样式。实则不然，我们看下 <a href="http://www.w3school.com.cn/cssref/pr_animation-fill-mode.asp" target="_blank" rel="external">w3c</a> 的解释：</p><blockquote><p>backwards：在 animation-delay 所指定的一段时间内，在动画显示之前，应用开始属性值（在第一个关键帧中定义）。</p></blockquote><p>换句话说，<code>backwards</code> 作用的是 <code>animation-delay</code> 的时间段，应用第一个关键帧的样式。<br></p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.ani-area__item--backwards</span> &#123;</div><div class="line">    <span class="attribute">animation</span>: ani <span class="number">1s</span> <span class="number">1s</span> ease;</div><div class="line">    <span class="attribute">animation-fill-mode</span>: backwards;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p></p><p data-height="265" data-theme-id="0" data-slug-hash="YpVxpw" data-default-tab="css,result" data-user="Yetty" data-embed-version="2" data-pen-title="YpVxpw" class="codepen">See the Pen <a href="http://codepen.io/Yetty/pen/YpVxpw/" target="_blank" rel="external">YpVxpw</a> by Yetty (<a href="http://codepen.io/Yetty" target="_blank" rel="external">@Yetty</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p><script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><p>当然，动画的第一帧和最后一帧的计算还受 <code>animation-direction</code> 和 <code>animation-iteration-count</code> 的影响，<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-fill-mode" target="_blank" rel="external">MDN</a> 中有详细解释：</p><blockquote><p>forwards</p><table><thead><tr><th>animation-direction</th><th>animation-iteration-count</th><th>last keyframe encountered</th></tr></thead><tbody><tr><td>normal</td><td>even or odd</td><td>100% or to</td></tr><tr><td>reverse</td><td>even or odd</td><td>0% or from</td></tr><tr><td>alternate</td><td>even</td><td>0% or from</td></tr><tr><td>alternate</td><td>odd</td><td>100% or to</td></tr><tr><td>alternate-reverse</td><td>even</td><td>100% or to</td></tr><tr><td>alternate-reverse</td><td>odd</td><td>0% or from</td></tr></tbody></table><p>backwards</p><table><thead><tr><th>animation-direction</th><th>first relevant keyframe</th></tr></thead><tbody><tr><td>normal or alternate</td><td>0% or from</td></tr><tr><td>reverse or alternate-reverse</td><td>100% or to</td></tr></tbody></table></blockquote><h3 id="3-animation-direction" class="post-heading"><a href="#3-animation-direction" class="headerlink" title="3. animation-direction"></a>3. animation-direction<a class="post-anchor" href="#3-animation-direction" aria-hidden="true"></a></h3><p>既然上表中涉及了 <code>animation-direction</code> 属性，那我们就顺着来研究一下它。<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-direction" target="_blank" rel="external">MDN</a> 中的介绍：</p><blockquote><p>animation-direction CSS 属性指示动画是否反向播放。</p></blockquote><h4 id="进-退场动画复用" class="post-heading"><a href="#进-退场动画复用" class="headerlink" title="进/退场动画复用"></a>进/退场动画复用<a class="post-anchor" href="#进-退场动画复用" aria-hidden="true"></a></h4><p>动画元素有进场动画，往往也会需要退场动画。比较常见的做法，退场时使用与进场动画反向的动画。<code>animation-direction</code> 的 <code>reverse</code> 属性值可简单实现反向动画。</p><p>先看<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-direction" target="_blank" rel="external">MDN</a> 中的介绍：</p><blockquote><p>reverse：反向运行动画，每周期结束动画由尾到头运行。</p></blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.on</span> &#123;</div><div class="line">  <span class="selector-class">.ani--translate</span> &#123;</div><div class="line">      <span class="attribute">animation</span>: aniTranslate <span class="number">1s</span> ease forwards;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.off</span> &#123;</div><div class="line">  <span class="selector-class">.ani--translate</span> &#123;</div><div class="line">      <span class="attribute">animation</span>: aniTranslate <span class="number">1s</span> ease forwards reverse;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">@keyframes aniTranslate &#123;</div><div class="line">  <span class="number">0%</span> &#123; <span class="attribute">transform</span>: translateY(<span class="number">300px</span>) &#125;</div><div class="line">  <span class="number">100%</span> &#123; <span class="attribute">transform</span>: translateY(<span class="number">0</span>) &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$wrap</span>.removeClass(<span class="string">'on'</span>);</div><div class="line"><span class="variable">$wrap</span>.innerWidth(<span class="variable">$wrap</span>.innerWidth); <span class="regexp">/* 使用 reflow 重新触发一下 animation */</span></div><div class="line"><span class="variable">$wrap</span>.addClass(<span class="string">'off'</span>);</div></pre></td></tr></table></figure><p></p><p data-height="265" data-theme-id="0" data-slug-hash="YpQqKZ" data-default-tab="css,result" data-user="Yetty" data-embed-version="2" data-pen-title="YpQqKZ" class="codepen">See the Pen <a href="http://codepen.io/Yetty/pen/YpQqKZ/" target="_blank" rel="external">YpQqKZ</a> by Yetty (<a href="http://codepen.io/Yetty" target="_blank" rel="external">@Yetty</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p><script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><p>当然，上述例子为了演示方便，只是简单做了只有两帧的动画，这种效果用 <code>transition</code> 同样可以实现。</p><h3 id="4-animation-play-state" class="post-heading"><a href="#4-animation-play-state" class="headerlink" title="4. animation-play-state"></a>4. animation-play-state<a class="post-anchor" href="#4-animation-play-state" aria-hidden="true"></a></h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-play-state" target="_blank" rel="external">MDN</a> 中的介绍：</p><blockquote><p>animation-play-state CSS 属性定义一个动画是否运行或者暂停。</p></blockquote><h4 id="翻页动画控制" class="post-heading"><a href="#翻页动画控制" class="headerlink" title="翻页动画控制"></a>翻页动画控制<a class="post-anchor" href="#翻页动画控制" aria-hidden="true"></a></h4><p>在做翻页 h5 时，需要对动画的播放进行控制。只有当用户进入当前屏时，动画才开始播放。通常我们会给当前屏加上一个 <code>acitve</code> 类，用来给元素添加动画：<br></p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.active</span> <span class="selector-class">.ele</span> &#123;</div><div class="line">    <span class="attribute">animation</span>: ani <span class="number">1s</span> ease;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>或者如上文“进/退场动画复用”中的例子，分别用 <code>on</code> 和 <code>off</code> 控制进/退场动画。这都是常见的思路。<br>如果是不需要重复触发的动画，用 <code>animation-play-state</code> 同样可以实现动画的控制。动画属性直接添加到元素上， <code>animation-play-state</code> 默认设置为 <code>paused</code>，当进入当前屏时，将 <code>animation-play-state</code> 设置为 <code>running</code> 即可。<br></p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.ani</span> &#123; </div><div class="line">    <span class="attribute">animation</span>: ani1 <span class="number">1s</span> ease;</div><div class="line">    <span class="attribute">animation-play-state</span>: paused; <span class="comment">/* animation-play-state 默认设置为 paused */</span></div><div class="line">&#125;</div><div class="line"><span class="selector-class">.active</span> <span class="selector-class">.ani</span> &#123;</div><div class="line">    <span class="attribute">animation-play-state</span>: running; <span class="comment">/* 进入当前屏，animation-play-state 设置为 running */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p></p><p data-height="572" data-theme-id="0" data-slug-hash="vymWwE" data-default-tab="css,result" data-user="Yetty" data-embed-version="2" data-pen-title="vymWwE" class="codepen">See the Pen <a href="http://codepen.io/Yetty/pen/vymWwE/" target="_blank" rel="external">vymWwE</a> by Yetty (<a href="http://codepen.io/Yetty" target="_blank" rel="external">@Yetty</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p><script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><h4 id="轮播的交互" class="post-heading"><a href="#轮播的交互" class="headerlink" title="轮播的交互"></a>轮播的交互<a class="post-anchor" href="#轮播的交互" aria-hidden="true"></a></h4><p>在前文介绍 <code>animation-delay</code> 时，提到了一个轮播的例子，当用户 <code>hover</code> 时，轮播动画应该暂停，用 <code>animation-play-state</code> 属性便可轻松实现交互：<br></p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.slider</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.slider__item</span>&#123; </div><div class="line">    <span class="attribute">animation-play-state</span>: paused;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h3 id="5-animation-timing-function" class="post-heading"><a href="#5-animation-timing-function" class="headerlink" title="5. animation-timing-function"></a>5. animation-timing-function<a class="post-anchor" href="#5-animation-timing-function" aria-hidden="true"></a></h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-timing-function" target="_blank" rel="external">MDN</a> 中的介绍：</p><blockquote><p>CSS animation-timing-function 属性定义 CSS 动画在每一动画周期中执行的节奏。</p></blockquote><p>关于 <code>animation-timing-function</code>，有一个特别需要注意的点，<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-timing-function" target="_blank" rel="external">MDN</a> 中有强调：</p><blockquote><p>对于关键帧动画来说，timing function 作用于一个关键帧周期而非整个动画周期，即从关键帧开始开始，到关键帧结束结束。</p></blockquote><p>也就是说，<code>animation-timing-function</code> 是作用于 <code>@keyframes</code> 中设置的两个关键帧之间的，这一点在该属性值为 <code>steps()</code> 时可明显感知。</p><h4 id="逐帧动画" class="post-heading"><a href="#逐帧动画" class="headerlink" title="逐帧动画"></a>逐帧动画<a class="post-anchor" href="#逐帧动画" aria-hidden="true"></a></h4><p><code>animation-timing-function</code> 最让人感到惊（beng）艳（kui）的莫过于 <code>steps()</code> 属性值。利用 <code>steps()</code>，可以轻松实现逐帧动画（又称“精灵动画”），从而告别不可控的 gif 时代。<br>关于逐帧动画，笔者之前在<a href="//aotu.io/">凹凸实验室</a>平台已经发布过相关文章介绍，此处不再赘述，有兴趣的同学可前往围观：<a href="//aotu.io/notes/2016/05/17/css3-animation-frame/">《CSS3逐帧动画》</a>。</p><p>参考文章：</p><ul><li><a href="https://css-tricks.com/debugging-css-keyframe-animations/" target="_blank" rel="external">Debugging CSS Keyframe Animations - SARAH DRASNER</a></li><li><a href="http://isux.tencent.com/css-animation-skills.html" target="_blank" rel="external">多屏复杂动画CSS技巧三则 - zhangxinxu</a></li><li><a href="https://isux.tencent.com/html5-animation-performance-analysis.html" target="_blank" rel="external">打造H5动感影集的爱恨情仇(动画性能篇) －TQ</a></li></ul><div class="post-tags" style="display:none"><a href="/tags/动画/">动画</a></div><div class="post-categories" style="display:none"><a href="/cates/Web开发/">Web开发</a></div><div class="post-revision"><i class="fa fa-clock-o"></i> <time class="post-updated" datetime="2016-12-22T09:53:25.576Z">上次更新：2016-12-22 17:53:25</time></div></div><div class="post-nav"><div class="post-nav-next"><a href="/notes/2016/12/02/jcloud/" title="项目心得 -- 京东云改版">项目心得 -- 京东云改版 <i class="fa fa-chevron-right"></i></a></div><div class="post-nav-prev"><a href="/notes/2016/11/22/SVG_Web_Animation/" title="三看 SVG Web 动效"><i class="fa fa-chevron-left"></i> 三看 SVG Web 动效</a></div></div><div class="post-comments" id="comments"><div class="ds-thread" data-thread-key="bm90ZXMvMjAxNi8xMS8yOC9jc3MzLWFuaW1hdGlvbi1wcm9wZXJ0aWVzLw==" data-title="css3 animation 属性众妙" data-url="https://demo.lilidong.cn/notes/2016/11/28/css3-animation-properties/index.html"></div><script type="text/javascript">var duoshuoQuery={short_name:"Jackieli"};!function(){var t=document.createElement("script");t.id="duoshuo-script",t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script></div></article></div><aside class="mod-side" id="sidebar"><div class="mod-side-sec aotuwx"><img class="aotuwx-qrcode" src="/img/qrcode.jpg" alt="关注我们"><div class="aotuwx-slogan">每周五推送精选技术文章</div></div><div class="mod-side-sec works"><div class="mod-side-sec-hd"><h2>服务/产品</h2></div><div class="mod-side-sec-bd"><ul class="mod-side-list"><li><a href="//cases.aotu.io/mobi/maga.html" target="_blank" title="拇指期刊">拇指期刊</a></li><li><a href="//athena.aotu.io/" target="_blank" title="Athena">Athena</a></li><li><a href="//guide.aotu.io/" target="_blank" title="前端代码规范">前端代码规范</a></li><li><a href="//halojs.aotu.io/" target="_blank" title="HaloJS">HaloJS</a></li><li><a href="//sign.aotu.io/" target="_blank" title="邮件签名工具">邮件签名工具</a></li><li><a href="//mac.aotu.io/" target="_blank" title="MAC全栈环境">MAC全栈环境</a></li></ul></div></div><div class="mod-side-sec favlinks"><div class="mod-side-sec-hd"><h2>友情链接</h2></div><div class="mod-side-sec-bd"><ul class="mod-side-list"><li><a href="https://jdc.jd.com" target="_blank" title="京东设计中心">JDC京东设计中心</a></li><li><a href="http://fex.baidu.com" target="_blank" title="百度Web前端研发部">百度FEX</a></li><li><a href="http://taobaofed.org" target="_blank" title="淘宝前端团队">淘宝FED</a></li><li><a href="http://tgideas.qq.com" target="_blank" title="腾讯互娱设计中心">TGIdeas</a></li><li><a href="http://isux.tencent.com" target="_blank" title="腾讯SNG设计中心">ISUX</a></li><li><a href="http://cdc.tencent.com" target="_blank" title="腾讯用户研究与体验设计中心">CDC</a></li><li><a href="http://ued.ctrip.com" target="_blank" title="携程设计委员会">携程UED</a></li></ul></div></div></aside></div></div><div class="mod-backtop" id="backTop"><i class="fa fa-long-arrow-up"></i></div><footer class="mod-ft" id="footer"><div class="grid"><ul class="mod-ft-links"><li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li><li><a href="https://github.com/jackieli-json/jackieli-json.github.io" target="_blank"><i class="fa fa-github-alt"></i></a></li></ul><div class="mod-ft-sec mod-ft-copyright"><p>Designed by <a href="http://lilidong.cn" target="_blank">西门互联</a></p><p>Copyright &copy; 2016. All Rights Reserved.</p></div></div></footer><script src="/js/bundle/core.js"></script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?e850b980d029480b092fdd7503c3f8de";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><style>#cnzz_stat_icon_1258539944{display:none}</style><script type="text/javascript">var cnzz_protocol="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cspan id='cnzz_stat_icon_1258539944'%3E%3C/span%3E%3Cscript src='"+cnzz_protocol+"s11.cnzz.com/z_stat.php%3Fid%3D1258539944' type='text/javascript'%3E%3C/script%3E"))</script></body></html>